<div class="row mt-3 mb-2">
  <div class="col-md-6">
    <h1>Liste des utilisateurs</h1>
  </div>
  <div class="col-md-6"></div>
</div>

@if( filtre_role !== "" )
{
  <div class="my-2">
    <dl class="row">
        <dt class="col-sm-3">{{ filtre_role + "s " + filtre_niveau }}</dt>
        <dd class="col-sm-9">{{ totalDocs }}</dd>

        <dt class="col-sm-3">Nombre de page</dt>
        <dd class="col-sm-9">{{ totalPages}}</dd>

        <dt class="col-sm-3">Page courante</dt>
        <dd class="col-sm-9">{{ page }}</dd>

        <dt class="col-sm-3">Nombre de ligne par page</dt>
        <dd class="col-sm-9">{{ limit }}</dd>

    </dl>
  </div>
}

<div class="row mt-2">

  <mat-form-field  class="col-md-3">
    <mat-label>Type d'utilisateur</mat-label>
    <mat-select [(ngModel)]="filtre_role" (selectionChange)="onRoleSelect()">
      @for (role of roles; track role)
      {
        <mat-option [value]="role.value">{{ role.option }}</mat-option>
      }
    </mat-select>
  </mat-form-field>

  <mat-form-field  class="col-md-3">
    <mat-label>Niveau</mat-label>
    <mat-select [(ngModel)]="filtre_niveau" (selectionChange)="onLevelSelect()" [disabled]="niveau_disabled">
      @for (level of levels; track level)
      {
        <mat-option [value]="level.value">{{ level.option }}</mat-option>
      }
    </mat-select>
  </mat-form-field>

  <div class="col-md-6">
      <mat-paginator #paginator
                    class="demo-paginator"
                    (page)="handlePageEvent($event)"
                    [length]="totalDocs"
                    [pageSize]="limit"
                    [showFirstLastButtons]="true"
                    [pageSizeOptions]="[ 5 , 10 , 15 , 20 ]">
      </mat-paginator>
  </div>
</div>

<div>
  @for (utilisateur of utilisateurs; track utilisateur)
  {
    <app-one-user [utilisateur]="utilisateur"></app-one-user>
  }
</div>
